var ptPbApp=ptPbApp||{};!function($,e){String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$.fn.revealBind=function(){return this.reveal(),this.find(".pt-pb-upload-field").each(function(){var e=$(this);""!==e.val()?(e.siblings(".pt-pb-upload-button").hide(),e.siblings(".pt-pb-remove-upload-button").show(),e.siblings(".screenshot").empty().append('<img src="'+e.val()+'">').show()):(e.siblings(".pt-pb-upload-button").show(),e.siblings(".pt-pb-remove-upload-button").hide())}),this.find(".pt-pb-remove-upload-button").on("click",function(e){ptPbApp.Upload.RemoveFile($(e.target).parent())}),this.find(".pt-pb-upload-button").on("click",function(e){ptPbApp.Upload.AddFile(e)}),this.find(".pt-pb-icon-select").click(function(){var e=$(this);ptPbApp.iconPicker(function(t){var n=e.closest(".pt-pb-option-container");n.children(".pt-pb-icon").val(t),n.children(".icon-preview").html('<i class="fa fa-2x '+t+'"></i>')})}),this.find(".pt-pb-color").wpColorPicker(),this.find(".js-animations").on("change",function(e){e.preventDefault();var t=$(e.target),n=t.siblings(".animation-preview");n.removeClass().addClass(t.val()+" animated animation-preview").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass().addClass("animation-preview")})}),this},ptPbApp.template=e.memoize(function(t){var n,i={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(p){return(n=n||e.template($("#pt-pb-tmpl-"+t).html(),null,i))(p)}}),ptPbApp.htmlTemplate=e.memoize(function(t){var n,i={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(p){return(n=n||e.template(t,null,i))(p)}}),ptPbApp.partial=function(e,t){return ptPbApp.template(e)(t)},ptPbApp.generateOption=function(e,t,n){return n||(n=t),'<option value="'+t+'" '+(t==e?"selected":"")+" >"+n+"</option>"},ptPbApp.getInputPrefix=function(e){return(e.split("__").join("][")+"]").replace("pt_pb_section]","pt_pb_section")},ptPbApp.serializeElms=function(e){var t=e.serializeObject(),n={};return $.each(t,function(e,t){var i=e.split("][").slice(-1)[0].replace("]","")||"nn";n[i]=t}),n},ptPbApp.stripslashes=function t(e){return(e+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return t}})},ptPbApp.htmlEncode=function(e){return String(ptPbApp.stripslashes(e)).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},ptPbApp.iconPicker=function(e){if("function"==typeof e){var t=$("#quest_icon_picker_reveal");t.off("click").on("click",".fa-hover a",function(n){n.preventDefault();var i=$(this),p=i.attr("href").replace("#","");e.call(this,p),t.trigger("reveal:close",{openModalBg:!0,keepEditor:!0})}).trigger("reveal:open")}},$("#quest_icon_picker_reveal").reveal({animation:"none",openModalBg:!0,keepEditor:!0})}(jQuery,_);