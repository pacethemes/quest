/*! Quest - v1.4.4 - 2016-03-25
 * https://github.com/pacethemes/quest#readme
 * Copyright (c) 2016; * Licensed GPLv2+ */
!function(a){function b(a){return a.find("> li > a:not(.disabled)").eq(0)}function c(a){return a.find("> li > a:not(.disabled)").eq(-1)}function d(a,c){var d=a.nextAll("li").children("a:not(.disabled)").eq(0);return c||d.length?d:b(a.parent())}function e(a,b){var d=a.prevAll("li").children("a:not(.disabled)").eq(0);return b||d.length?d:c(a.parent())}a.fn.focusSM=function(){return this.length&&this[0].focus&&this[0].focus(),this},a.extend(a.SmartMenus.Keyboard={},{docKeydown:function(f){var g=f.keyCode;if(/(27|37|38|39|40)/.test(g)){var h=a(this),i=h.data("smartmenus"),j=a(f.target);if(i&&j.is("a")){var k=j.parent(),l=k.parent(),m=l.dataSM("level");if(m){switch(i.opts.rightToLeftSubMenus&&(37==g?g=39:39==g&&(g=37)),g){case 27:if(i.visibleSubMenus[m])i.menuHide(i.visibleSubMenus[m]);else if(1==m)if(i.opts.isPopup&&i.menuHideAll(),i.opts.keyboardEscapeFocus)try{i.opts.keyboardEscapeFocus.focusSM()}catch(f){}else{var n=h.find("a, input, select, button, textarea").eq(-1),o=a("a, input, select, button, textarea"),p=o.index(n[0])+1;o.eq(p).focusSM()}else l.dataSM("parent-a").focusSM(),i.menuHide(i.visibleSubMenus[m-1]);break;case 37:if(i.isCollapsible())break;m>2||2==m&&h.hasClass("sm-vertical")?i.activatedItems[m-2].focusSM():h.hasClass("sm-vertical")||e(i.activatedItems[0].parent()).focusSM();break;case 38:if(i.isCollapsible()){var q;m>1&&(q=b(l)).length&&j[0]==q[0]?i.activatedItems[m-2].focusSM():e(k).focusSM()}else 1==m&&!h.hasClass("sm-vertical")&&i.visibleSubMenus[m]&&i.opts.bottomToTopSubMenus?c(i.visibleSubMenus[m]).focusSM():(m>1||h.hasClass("sm-vertical"))&&e(k).focusSM();break;case 39:if(i.isCollapsible())break;1!=m&&i.visibleSubMenus[m]||h.hasClass("sm-vertical")?i.visibleSubMenus[m]&&!i.visibleSubMenus[m].hasClass("mega-menu")&&b(i.visibleSubMenus[m]).focusSM():d(i.activatedItems[0].parent()).focusSM();break;case 40:if(i.isCollapsible()){var r,s;if(i.visibleSubMenus[m]&&!i.visibleSubMenus[m].hasClass("mega-menu")&&(r=b(i.visibleSubMenus[m])).length)r.focusSM();else if(m>1&&(s=c(l)).length&&j[0]==s[0]){for(var t=i.activatedItems[m-2].parent(),u=null;t.is("li")&&!(u=d(t,!0)).length;)t=t.parent().parent();u.focusSM()}else d(k).focusSM()}else 1!=m||h.hasClass("sm-vertical")||!i.visibleSubMenus[m]||i.opts.bottomToTopSubMenus?(m>1||h.hasClass("sm-vertical"))&&d(k).focusSM():b(i.visibleSubMenus[m]).focusSM()}f.stopPropagation(),f.preventDefault()}}}}}),a(document).delegate("ul.sm","keydown.smartmenus",a.SmartMenus.Keyboard.docKeydown),a.extend(a.SmartMenus.prototype,{keyboardSetEscapeFocus:function(a){this.opts.keyboardEscapeFocus=a},keyboardSetHotkey:function(c,d){var e=this;a(document).bind("keydown.smartmenus"+this.rootId,function(f){if(c==f.keyCode){var g=!0;d&&("string"==typeof d&&(d=[d]),a.each(["ctrlKey","shiftKey","altKey","metaKey"],function(b,c){return a.inArray(c,d)>=0&&!f[c]||a.inArray(c,d)<0&&f[c]?(g=!1,!1):void 0})),g&&(b(e.$root).focusSM(),f.stopPropagation(),f.preventDefault())}})}})}(jQuery);